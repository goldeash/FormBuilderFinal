@model IEnumerable<FormBuilder.Models.Template>

@{
    ViewData["Title"] = ViewBag.SearchQuery != null ?
        $"Search Results for '{ViewBag.SearchQuery}'" : "Home Page";
}

<div class="hero-section text-center py-5 bg-light rounded-3 mb-4">
    <h1 class="display-4 fw-bold">Welcome to FormBuilder</h1>
    <p class="lead">Create and manage customizable forms with ease</p>

    @if (!User.Identity.IsAuthenticated)
    {
        <div class="mt-4">
            <a asp-controller="Account" asp-action="Register" class="btn btn-primary btn-lg me-2">Get Started</a>
            <a asp-controller="Account" asp-action="Login" class="btn btn-outline-primary btn-lg">Login</a>
        </div>
    }
    else
    {
        <div class="mt-4">
            <a asp-controller="Template" asp-action="Create" class="btn btn-primary btn-lg">Create New Form</a>
        </div>
    }
</div>

<div class="container mt-4">
    <h2 class="mb-4">@(ViewBag.SearchQuery != null ? "Search Results" : "Available Forms")</h2>

    @if (!Model.Any())
    {
        <div class="alert alert-info">
            @(ViewBag.SearchQuery != null ?
                "No forms found matching your search criteria." :
                "No forms available yet.")
        </div>
    }
    else
    {
        <div class="list-group">
            @foreach (var template in Model)
            {
                <a asp-action="View" asp-controller="Template" asp-route-id="@template.Id"
                   class="list-group-item list-group-item-action">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h5>@template.Title</h5>
                            <p class="mb-1 text-muted">@template.Description</p>
                            <small class="text-muted">
                                Created by: @template.User.Email |
                                Created: @template.CreatedDate.ToString("g")
                            </small>
                        </div>
                        <span class="badge bg-primary">@template.Topic</span>
                    </div>
                </a>
            }
        </div>
    }
</div>